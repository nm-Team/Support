# nmBot 2023 年 6 月功能更新

亲爱的用户，您期盼已久的 nmBot 功能更新现已推出。  
本更新推出了全新的警告功能，为群组管理员提供了更高的自由度和更好的使用体验。本更新强化了群组中自动删除消息功能，推出了 4 个新自动删除消息类别。本更新还包含错误修复和稳定性提升。

## 2023 年 6 月 14 日 00:53
nmBot 版本号：23.6.1

- 优化了特定情况下 nmBot 的运行速度。

## 2023 年 6 月 11 日 23:40

### 全新警告：可能性无限大
- 警告功能经过完全全新设计，带来更快的响应速度和更优质的用户体验。
- 新警告功能提供的按钮可让你快速封禁用户、解封用户或调整警告次数。
- 新警告功能新增对无限警告次数和负警告次数的支持。你可以在 nmBot /config 菜单和 nmBot 面板将警告次数调整为“无限”，使得无论警告次数多少，nmBot 都不会主动封禁用户。
- 新警告功能新增对警告原因的支持。你可以在警告用户时在参数后提供警告原因。警告原因将记录在“操作记录”中。
- 新警告功能支持直接回复含用户标签的 nmBot 消息完成警告。
- 制作组将在 6 月更新完成后，将群组管理员 6 月前警告的历史记录导入新版警告中。

### 自动删除更多类型的消息
- 自动删除消息功能新增对以下类型消息的支持：
    - 长文本消息。
    - 其他服务消息。
    - 含有链接的消息。
    - 含有自定义表情的消息。
- nmBot /config 菜单和 nmBot 面板“设置禁止发送的消息类别”设置集中新增了相关选项。

### 其他更新和修复
- 在关键词回复和入群欢迎中通过 {username} 指代用户时，若关键词回复内容解析模式为 HTML、Markdown 或 MarkdownV2 或是入群欢迎，则回复消息或欢迎消息中现在添加到用户的链接。
- 在关键词回复和入群欢迎中通过 {username} 指代用户时，回复消息或欢迎消息中将显示用户的 Telegram 会员标志。
- /dc 指令的返回消息中新增了“好”按钮，点击即可快速删除指令消息和返回消息。
- 对 nmBot 在 Telegram 中显示的指令列表作出如下调整：
    - 新增指令 warn，提示文本“警告用户”，仅在群组中对群组管理员显示。
    - 新增指令 tosticker，提示文本“转换图片为贴纸”，对所有用户显示。
    - 新增指令 toemoji，提示文本“转换图片为表情”，对所有用户显示。
    - 新增指令 about，提示文本“关于 nmBot”，仅在私信中显示。
    - 调整了指令 spam 的位置：调整后该指令显示在指令 lang 后。
    - 调整了指令 privacy 的显示范围：调整后该指令仅在私信中显示。
- 新增了 banme 功能的部分提示文本。
- 对未被封禁的用户使用 /unblock 指令时，该用户将不再被踢出群组。
- 使用 /ts 和 /te 指令将图片转换为贴纸或表情时，nmBot 将通过 Telegram 显示正在发送贴纸状态提示。
- 关键词回复忽略群组管理员的提示消息中，新增了“好”按钮，点击即可快速关闭提示。
- 优化了特定情况下 nmartChat 的触发效果。
- 优化了 /lr, /sr 指令返回的关键词回复列表文本的样式：相关文本现在以粗体和代码块显示。
- nmBot 面板中的如下元素新适配了屏幕阅读器标签文本：
    - 单屏视图下 nmBot 面板底栏中的图标。
    - 大部分页面中的“返回”按钮。
    - “管理”页面中的“搜索对话”“添加对话”图标、“搜索对话”输入框、群组列表中的群组。
    - 上下文菜单中的选项。
    - 带图标菜单组中的菜单项。
- nmBot 面板的网页语言将始终遵循用户的语言设置。
- 调整了 nmBot 运行时与 Telegram 同步指令列表前的延迟。
- 同频气氛组可选的“称赞”“热情”和“猫娘”选项现作为正式功能推出。
- 优化了“群友互动”功能的安全性。
- 对 nmBot 内容本地化做出了如下调整和修复：
    - 优化了使用简体中文或繁体中文时，数据中心查询功能无法获取目标用户头像时的说明文本。
    - 优化了简体中文和繁体中文中 /ban, /block, /cw, /kick, /lc, /sc, /spam, /unban, /unblock, /unwarn, /warn 指令详情的部分参数文本、/ban, /block, /cw, /spam, /unban, /unblock 指令无法识别目标操作用户身份时的部分提示文本和部分其他提示文本：相关文本内容中的 “username” 调整为“用户名”。
    - 修复了使用简体中文以外的语言时，锁定模式执行失败时群组中的提示消息未正确本地化的问题。
    - 修复了使用简体中文以外的语言时，入群验证拒绝非会员用户入群时，群组中的提示消息中“解除封禁”按钮未正确本地化的问题。
    - 修复了使用英文时， /lr, /sr 指令的返回消息中“关键词：”和“回复：”与实际内容间没有空格的问题。
    - 修复了使用英文时，nmBot /config 菜单中警告次数设置为 1 时相关按钮文本也显示为复数的问题。
    - 修复了使用英文时，nmBot /config 菜单中警告功能设置为关闭时，对号 Emoji 和文本间存在一个多余空格的问题。
- 修复了可以使用 /whatis how 指令查询到不存在的 how 指令的问题。
- 修复了“发言频率限制”功能部分次数限制选项不生效的问题。
- 修复了入群验证拒绝非会员用户入群时，群组中的提示消息未正常发送的问题。
- 修复了管理员通过用户入群验证后，入群欢迎消息中的 {username} 文本被转换为通过入群验证的管理员的信息的问题。
- 修复了入群欢迎消息中的 {username} 文本在转换时解析格式可能不正确的问题。
- 修复了群组未启用入群验证时，入群欢迎消息未正常发送的问题。
- 修复了以频道身份发送的消息不会被“设置禁止发送的消息类别”设置中除“频道身份消息”以外的设置项识别并删除的问题。
- 修复了锁定模式执行后，未在 nmBot 锁定模式设置中显示的权限被自动关闭的问题。
- 修复了使用 /kick 指令会将用户封禁，而非仅踢出群组的问题。
- 修复了 /lr, /sr 指令的返回消息中可能显示链接预览的问题。
- 修复了“文本处理”行内功能集中，文本内容含有 Emoji 时，“打字带空格”功能转码文本错误导致相关行内选项未正确显示的问题。
- 修复了 nmBot /config 菜单警告次数设置页面中，“关闭”选项选中时，对号 Emoji 和文本间缺少空格的问题。
- 修复了入群验证超时提示消息中，“举报骚扰”按钮无法使用的问题。
- 修复了举报含有某些字符组合的骚扰消息时，操作可能无法完成的问题。
- 修复了 nmBot 管理员无法添加禁止入群用户简介的问题。